{"version":3,"file":"static/js/980.776bc660.chunk.js","mappings":"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","sources":["app/posts/wcPost.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Row, Col } from \"react-bootstrap\";\nimport { useOutletContext } from \"react-router-dom\";\nimport { useImportScript, useImportStylesheet } from \"../fucnForApp.js\";\n\n//app wrap\nconst WCPostFullArticle = () => {\n  const outletContextProps = useOutletContext();\n  //create ref for get codeBlock fo higlight by prism\n  const codeBlock_1 = useRef();\n  const codeBlock_2 = useRef();\n  const initialCode = `\n    const foo = 'foo'; \n    const bar = 'bar';\n    console.log(foo + bar);\n  `.trim();\n  const [flaskAppCode, setFlaskAppCode] = useState(initialCode);\n  const [wsgiAppCode, setWsgiAppCode] = useState(initialCode);\n  const [scriptsLoaded, setScriptsLoaded] = useState(false);\n\n  //import pirsm CSS from CDN\n  useImportStylesheet(\n    \"https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/themes/prism-okaidia.min.css\",\n    \"sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==\",\n    \"anonymous\",\n    \"no-referrer\"\n  );\n  //import pirsm-lineNumber-jsPlugin CSS from CDN\n  useImportStylesheet(\n    \"https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/plugins/line-numbers/prism-line-numbers.min.css\",\n    \"sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ==\",\n    \"anonymous\",\n    \"no-referrer\"\n  );\n\n  const arrPrismJsSrc = [\n    \"https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/components/prism-core.min.js\",\n    \"https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/plugins/autoloader/prism-autoloader.min.js\",\n    \"https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/plugins/line-numbers/prism-line-numbers.min.js\"\n  ];\n  const arrSHA512Sums = [\n    \"sha512-LCKPTo0gtJ74zCNMbWw04ltmujpzSR4oW+fgN+Y1YclhM5ZrHCZQAJE4quEodcI/G122sRhSGU2BsSRUZ2Gu3w==\",\n    \"sha512-GP4x8UWxWyh4BMbyJGOGneiTbkrWEF5izsVJByzVLodP8CuJH/n936+yQDMJJrOPUHLgyPbLiGw2rXmdvGdXHA==\",\n    \"sha512-dubtf8xMHSQlExGRQ5R7toxHLgSDZ0K7AunqPWHXmJQ8XyVIG19S1T95gBxlAeGOK02P4Da2RTnQz0Za0H0ebQ==\"\n  ];\n\n  //import pirsmJS from CDN\n  useImportScript(arrPrismJsSrc, arrSHA512Sums, setScriptsLoaded);\n\n  //fetch App.py code from git\n  fetch(\"https://raw.githubusercontent.com/NeoBliz1/t-msg-bot/master/app.py\")\n    .then((response) => response.text())\n    .then((data) => setFlaskAppCode(data));\n\n  //fetch wsgi.py code from git\n  fetch(\"https://raw.githubusercontent.com/NeoBliz1/t-msg-bot/master/wsgi.py\")\n    .then((response) => response.text())\n    .then((data) => setWsgiAppCode(data));\n\n  //if scriptsLoaded or flaskAppCode have changed useEffect executed\n  useEffect(() => {\n    //console.log(`scriptsLoaded is ${scriptsLoaded}`)\n    if (scriptsLoaded) {\n      //console.log(typeof window.Prism !== 'undefined')\n      //console.log(typeof window.Prism.plugins.autoloader !== 'undefined')\n      //console.log(typeof window.Prism.plugins.lineNumbers !== 'undefined')\n      //console.log('highlight')\n      window.Prism.highlightElement(codeBlock_1.current);\n      window.Prism.highlightElement(codeBlock_2.current);\n    }\n    //console.log(window.Prism)\n    //if prismjs core and plugin line numbers have executed then start code highlight\n  }, [scriptsLoaded, flaskAppCode]);\n  return (\n    <Row className=\"justify-content-center\">\n      <Col className=\"text-justify\" xs={12} sm={11} md={11} xxl={6}>\n        <h4 className={outletContextProps.h4}>\n          Website chat with messages via telegram, easy peasy. My minds before\n          I've started dive into.\n        </h4>\n        <div\n          className=\"overflow-hidden position-relative\"\n          style={{ height: \"16rem\" }}\n        >\n          {/************************************************************\n            header image \n            ***************************************************************/}\n          <img\n            src=\"//live.staticflickr.com/6133/5940816324_14dc1e5197_b.jpg\"\n            className=\"w-100 position-absolute top-50 start-50 translate-middle\"\n            alt=\"The easy way is hard enough\"\n          />\n        </div>\n        <div\n          className={\n            \"d-flex justify-content-center \" + outletContextProps.linkToAuthor\n          }\n        >\n          <a\n            href=\"https://flic.kr/p/a3YeHE\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            className=\"me-1 text-secondary\"\n          >\n            Photo: Nicol√°s Boullosa\n          </a>\n          <a\n            href=\"https://creativecommons.org/licenses/by/2.0/\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            className=\"text-secondary\"\n          >\n            (CC BY 2.0)\n          </a>\n        </div>\n        <div className={outletContextProps.p} style={{ textAlign: \"justify\" }}>\n          <p>\n            First of all I've researched some telegram chat apps which already\n            existed. Those either demanded payment either was not suitable\n            format for my website. So I've thought: \"It will be easy to create\n            app like this, also it will be useful experience\".\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://neobliz1.github.io/\"\n            >\n              Front-end\n            </a>\n            part written on\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://jqueryui.com/dialog/\"\n            >\n              Jquery UI\n            </a>\n            framework and\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://jquery.com/\"\n            >\n              Jquery\n            </a>\n            Library. It has simple logic, while chat is open every 5 second it\n            sends request for getting messages from the server.\n          </p>\n          <p>\n            Instruction about server side based on the\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://aliabdelaal.medium.com/telegram-bot-tutoria-using-python-and-flask-1fc634da9522\"\n            >\n              Ali's article.\n            </a>{\" \"}\n            According to the article I implemented that logic to my\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://github.com/NeoBliz1/t-msg-bot/blob/master/app.py\"\n            >\n              program.\n            </a>\n            Code written in python with Flask framework. Firstly I've started to\n            analyze how flask is working. I've read about\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://flask.palletsprojects.com/en/2.0.x/quickstart/#routing\"\n            >\n              flask\n            </a>\n            routes and\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://docs.python-requests.org/en/latest/user/quickstart/#make-a-request\"\n            >\n              requests\n            </a>\n            library, it seemed to be enough.\n          </p>\n          <pre className=\"line-numbers\" style={{ maxHeight: \"800px\" }}>\n            <code ref={codeBlock_1} className=\"language-python\">\n              {flaskAppCode}\n            </code>\n          </pre>\n          <p>\n            Insofar as I was creating an app on the local machine, it was\n            rejecting every request that I was trying to send from local server\n            to another port. So because of that I made a decision deploy app on\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://www.heroku.com/\"\n            >\n              Heroky Cloud service.\n            </a>\n            Considering Ali's article it seemed to be a good idea. Heroku is\n            quite convenient and simple for newbies, in additional it's free for\n            pet projects. So I've read the\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://devcenter.heroku.com/articles/getting-started-with-python\"\n            >\n              manual\n            </a>\n            how deployed the app, then I installed a Heroku local app on my PC\n            via Ubuntu terminal.\n          </p>\n          <p>\n            After deploying, it still was an error like 'Cross-Origin Request\n            Blocked'. I read around some articles about CORS errors and I found\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              href=\"https://flask-cors.readthedocs.io/en/latest/\"\n            >\n              Flask extension\n            </a>\n            for handling Cross Origin Resource Sharing (CORS). Flask_cors made\n            cross-origin AJAX possible. So I added Flask-CORS to my app, after\n            that requests finally reached the server. Heroku is convenient\n            service for pet projects, but it doesn't have possibility to set\n            free SSL certificate (I've tried sertificate from Cloudflare).\n          </p>\n          <p>\n            Telegram\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              href=\"https://core.telegram.org/bots/webhooks#the-short-version\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              webhook\n            </a>\n            it's a useful feature which allows to get a response message from\n            telegram server in the same moment as it sends to telegram bot from\n            definite user. But it demands\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              href=\"https://core.telegram.org/bots/webhooks#ssl-needs-a-certificate\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              SSL\n            </a>\n            . Spent some time reading about SSL certificates, I've found\n            possibility to get a free SSL certificate from Cloudflare. So I made\n            the decision to rent a cheap Ubuntu server and set up my new\n            application there. For server tuning I used\n            <a\n              className={\"mx-1 \" + outletContextProps.p}\n              href=\"https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-gunicorn-and-nginx-on-ubuntu-20-04\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              Digitalocean guide\n            </a>\n            .\n          </p>\n          <pre className=\"line-numbers\" style={{ maxHeight: \"800px\" }}>\n            <code ref={codeBlock_2} className=\"language-python\">\n              {wsgiAppCode}\n            </code>\n          </pre>\n        </div>\n      </Col>\n    </Row>\n  );\n};\n\nexport default WCPostFullArticle;\n"],"names":["outletContextProps","useOutletContext","codeBlock_1","useRef","codeBlock_2","initialCode","trim","useState","flaskAppCode","setFlaskAppCode","wsgiAppCode","setWsgiAppCode","scriptsLoaded","setScriptsLoaded","useImportStylesheet","useImportScript","fetch","then","response","text","data","useEffect","window","Prism","highlightElement","current","className","xs","sm","md","xxl","h4","style","height","src","alt","linkToAuthor","href","target","rel","p","textAlign","maxHeight","ref"],"sourceRoot":""}